{"ast":null,"code":"import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useState,useEffect}from'react';import Text from\"react-native-web/dist/exports/Text\";import View from\"react-native-web/dist/exports/View\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Button from\"react-native-web/dist/exports/Button\";import ScrollView from\"react-native-web/dist/exports/ScrollView\";import{Picker}from'@react-native-picker/picker';import AsyncStorage from'@react-native-community/async-storage';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function Content(_ref){var name=_ref.name,email=_ref.email,setActivePage=_ref.setActivePage;console.log(\"Received email prop:\",email);var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),language=_useState4[0],setLanguage=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),difficulty=_useState6[0],setDifficulty=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),quizcount=_useState8[0],setquizcount=_useState8[1];useEffect(function(){var getEmailFromStorage=function(){var _ref2=_asyncToGenerator(function*(){if(!email){var storedEmail=yield AsyncStorage.getItem('userEmail');console.log(\"Email from local storage:\",storedEmail);if(storedEmail){email=storedEmail;}}});return function getEmailFromStorage(){return _ref2.apply(this,arguments);};}();getEmailFromStorage();},[]);useEffect(function(){var fetchUserPreferences=function(){var _ref3=_asyncToGenerator(function*(){try{console.log(\"Using email for API call:\",email);if(!email)return;var response=yield fetch(`https://skeba.info/netlify/get-biography.php?email=${email}`);var data=yield response.json();console.log(\"data:\",data);if(data){setLanguage(data.language||\"spanish\");setDifficulty(data.difficulty||\"beginner\");setquizcount(data.quiz_count||0);}}catch(error){console.error('Error fetching user preferences:',error);}});return function fetchUserPreferences(){return _ref3.apply(this,arguments);};}();fetchUserPreferences();},[email]);var saveBiographyAndPreferences=function(){var _ref4=_asyncToGenerator(function*(newDifficulty){try{console.log(\"Saving preferences for email:\",email,newDifficulty);console.log(\"New difficulty:\",newDifficulty);var response=yield fetch('https://skeba.info/netlify/save-biography.php',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:email,difficulty:newDifficulty})});if(response.ok){var data=yield response.json();if(data&&data.message){alert(data.message);}else{alert('Unexpected response from the server.');console.error('Unexpected data:',data);}}else{alert('Failed to save data.');console.error('Response not OK:',response);}}catch(error){console.error('There was an error saving the data:',error);}});return function saveBiographyAndPreferences(_x){return _ref4.apply(this,arguments);};}();return _jsxs(ScrollView,{style:styles.container,children:[_jsxs(Text,{style:styles.header,children:[\"Welcome \",name,\"!\"]}),_jsx(Text,{style:styles.subHeader,children:\"Select your difficulty level:\"}),_jsx(View,{style:styles.pickerContainer,children:_jsxs(Picker,{selectedValue:difficulty||\"\",style:styles.picker,onValueChange:function onValueChange(itemValue){setDifficulty(itemValue);console.log(\"Changed difficulty to:\",itemValue);saveBiographyAndPreferences(itemValue);},children:[_jsx(Picker.Item,{label:\"Beginner\",value:\"beginner\"}),_jsx(Picker.Item,{label:\"Intermediate\",value:\"intermediate\"}),_jsx(Picker.Item,{label:\"Advanced\",value:\"advanced\"})]})}),_jsx(View,{style:styles.buttonContainer,children:_jsx(Button,{title:\"Take a Quiz!\",onPress:function onPress(){return setActivePage('quiz');}})})]});}var styles=StyleSheet.create({container:{flex:1,padding:20,backgroundColor:'#f5f5f5'},header:{fontSize:26,fontWeight:'bold',color:'#333',textAlign:'center',marginBottom:20},subHeader:{fontSize:18,fontWeight:'600',color:'#555',textAlign:'center',marginBottom:10},pickerContainer:{alignItems:'center',justifyContent:'center',marginBottom:20},picker:{height:50,width:200,borderColor:'#ccc',borderWidth:1,borderRadius:8,backgroundColor:'white'},buttonContainer:{alignItems:'center',justifyContent:'center',width:200,alignSelf:'center',marginTop:20}});export default Content;","map":{"version":3,"names":["React","useState","useEffect","Text","View","StyleSheet","Button","ScrollView","Picker","AsyncStorage","jsxs","_jsxs","jsx","_jsx","Content","_ref","name","email","setActivePage","console","log","_useState","_useState2","_slicedToArray","loading","setLoading","_useState3","_useState4","language","setLanguage","_useState5","_useState6","difficulty","setDifficulty","_useState7","_useState8","quizcount","setquizcount","getEmailFromStorage","_ref2","_asyncToGenerator","storedEmail","getItem","apply","arguments","fetchUserPreferences","_ref3","response","fetch","data","json","quiz_count","error","saveBiographyAndPreferences","_ref4","newDifficulty","method","headers","body","JSON","stringify","ok","message","alert","_x","style","styles","container","children","header","subHeader","pickerContainer","selectedValue","picker","onValueChange","itemValue","Item","label","value","buttonContainer","title","onPress","create","flex","padding","backgroundColor","fontSize","fontWeight","color","textAlign","marginBottom","alignItems","justifyContent","height","width","borderColor","borderWidth","borderRadius","alignSelf","marginTop"],"sources":["/Users/nika/Documents/GitHub/AI_quiz_generatorold/Content.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'; // Add missing hooks\nimport { Text, View, StyleSheet, Button, ScrollView} from 'react-native'; // Add missing components\nimport { Picker } from '@react-native-picker/picker';\nimport AsyncStorage from '@react-native-community/async-storage';\n\n\nfunction Content({ name, email, setActivePage}) {\n    console.log(\"Received email prop:\", email);\n\n    const [loading, setLoading] = useState(true);\n    const [language, setLanguage] = useState(null);\nconst [difficulty, setDifficulty] = useState(\"\"); // Use an empty string as the default value\n    const [quizcount, setquizcount] = useState(null);\n    useEffect(() => {\n  const getEmailFromStorage = async () => {\n    if (!email) {\n        const storedEmail = await AsyncStorage.getItem('userEmail');\n        console.log(\"Email from local storage:\", storedEmail);\n        if (storedEmail) {\n            email = storedEmail;  // Update the email from local storage\n        }\n    }\n};\n    \n    getEmailFromStorage();\n}, []);\n    useEffect(() => {\n        const fetchUserPreferences = async () => {\n            try {\n                console.log(\"Using email for API call:\", email);\n\n                if (!email) return; // Use email directly\n                const response = await fetch(`https://skeba.info/netlify/get-biography.php?email=${email}`);\n                const data = await response.json();\n                console.log(\"data:\", data);\n                if (data) {\n                    setLanguage(data.language || \"spanish\");\n                    setDifficulty(data.difficulty || \"beginner\");\n                    setquizcount(data.quiz_count || 0);\n                }\n            } catch (error) {\n                console.error('Error fetching user preferences:', error);\n            }\n        };\n\n        fetchUserPreferences();\n    }, [email]);\n\n    const saveBiographyAndPreferences = async (newDifficulty) => {\n     \n\n        try {\n            console.log(\"Saving preferences for email:\", email, newDifficulty);\n   console.log(\"New difficulty:\", newDifficulty);\n            const response = await fetch('https://skeba.info/netlify/save-biography.php', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({ email, difficulty: newDifficulty })\n\n            });\n\n            if (response.ok) {\n                const data = await response.json();\n                if (data && data.message) {\n                    alert(data.message);\n                } else {\n                    alert('Unexpected response from the server.');\n                    console.error('Unexpected data:', data);\n                }\n            } else {\n                alert('Failed to save data.');\n                console.error('Response not OK:', response);\n            }\n        } catch (error) {\n            console.error('There was an error saving the data:', error);\n        }\n    };\n\n    return (\n        <ScrollView style={styles.container}>\n            <Text style={styles.header}>Welcome {name}!</Text>\n            \n            <Text style={styles.subHeader}>Select your difficulty level:</Text>\n            \n            <View style={styles.pickerContainer}>\n                <Picker\n                    selectedValue={difficulty || \"\"}\n                    style={styles.picker}\n                    onValueChange={(itemValue) => {\n                        setDifficulty(itemValue);\n                        console.log(\"Changed difficulty to:\", itemValue);\n\n                        saveBiographyAndPreferences(itemValue);\n                    }}\n                >\n                    <Picker.Item label=\"Beginner\" value=\"beginner\" />\n                    <Picker.Item label=\"Intermediate\" value=\"intermediate\" />\n                    <Picker.Item label=\"Advanced\" value=\"advanced\" />\n                </Picker>\n            </View>\n            \n            <View style={styles.buttonContainer}>\n                <Button title=\"Take a Quiz!\" onPress={() => setActivePage('quiz')} />\n            </View>\n        </ScrollView>\n    );\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        padding: 20,\n        backgroundColor: '#f5f5f5',\n    },\n    header: {\n        fontSize: 26,\n        fontWeight: 'bold',\n        color: '#333',\n        textAlign: 'center',\n        marginBottom: 20,\n    },\n    subHeader: {\n        fontSize: 18,\n        fontWeight: '600',\n        color: '#555',\n        textAlign: 'center',\n        marginBottom: 10,\n    },\n    pickerContainer: {\n        alignItems: 'center',\n        justifyContent: 'center',\n        marginBottom: 20,\n    },\n    picker: {\n        height: 50,\n        width: 200,\n        borderColor: '#ccc',\n        borderWidth: 1,\n        borderRadius: 8,\n        backgroundColor: 'white',\n    },\n    buttonContainer: {\n        alignItems: 'center',\n        justifyContent: 'center',\n        width: 200,\n        alignSelf: 'center',\n        marginTop: 20,\n    },\n});\n\nexport default Content;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}